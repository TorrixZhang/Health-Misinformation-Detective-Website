{"ast":null,"code":"var _jsxFileName = \"/Users/yutao/Desktop/MIT-S3/Django/7381-Project/Frontend/7381-website/src/pages/UploadFile.js\";\nimport React from \"react\";\nimport { Upload, message, Button, Progress } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport logoPic from \"../images/LOGO-H 1.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst logoStyle = {\n  height: \"65px\"\n};\naxios.defaults.withCredentials = true;\n\nclass UploadFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.configs = {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      },\n      withCredentials: true,\n      onUploadProgress: progress => {\n        console.log(progress);\n        let {\n          loaded\n        } = progress;\n        let {\n          filseSize\n        } = this.state;\n        console.log(loaded, filseSize);\n        let baifenbi = (loaded / filseSize * 100).toFixed(2);\n        this.setState({\n          baifenbi\n        });\n      }\n    };\n\n    this.handleUpload = () => {\n      const {\n        fileList\n      } = this.state;\n      const formData = new FormData();\n      fileList.forEach(file => {\n        formData.append(\"files[]\", file);\n      });\n      this.setState({\n        uploading: true\n      });\n      axios.post(\"http://127.0.0.1:8000/upload\", formData, this.configs).then(res => {\n        this.setState({\n          baifenbi: 100,\n          uploading: false,\n          fileList: []\n        });\n      }).finally(log => {\n        console.log(log);\n      });\n    };\n\n    this.onchange = info => {\n      if (info.file.status !== \"uploading\") {\n        this.setState({\n          filseSize: info.file.size,\n          baifenbi: 0\n        });\n      }\n\n      if (info.file.status === \"done\") {\n        message.success(`${info.file.name} file uploaded successfully`);\n      } else if (info.file.status === \"error\") {\n        message.error(`${info.file.name} file upload failed.`);\n      }\n    };\n\n    this.state = {\n      fileList: [],\n      uploading: false,\n      filseSize: 0,\n      baifenbi: 0\n    };\n  }\n\n  render() {\n    const {\n      uploading,\n      fileList\n    } = this.state;\n    const props = {\n      onRemove: file => {\n        this.setState(state => {\n          const index = state.fileList.indexOf(file);\n          const newFileList = state.fileList.slice();\n          newFileList.splice(index, 1);\n          return {\n            fileList: newFileList\n          };\n        });\n      },\n      beforeUpload: file => {\n        this.setState(state => ({\n          fileList: [...state.fileList, file]\n        }));\n        return false;\n      },\n      fileList\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"80%\",\n        margin: \"auto\",\n        padding: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"postSection\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logoPic,\n            alt: \"logo\",\n            id: \"logo-picture\",\n            style: logoStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"post_navigation\",\n          children: \"Post Your Video Here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: this.state.baifenbi + \"%\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Upload, {\n        onChange: e => {\n          this.onchange(e);\n        },\n        ...props,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          children: [/*#__PURE__*/_jsxDEV(UploadOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), \" Click to Upload\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: this.handleUpload,\n        disabled: fileList.length === 0,\n        loading: uploading,\n        style: {\n          marginTop: 16\n        },\n        children: uploading ? \"Uploading\" : \"Start Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Progress, {\n        style: {\n          marginTop: 20\n        },\n        status: this.state.baifenbi !== 0 ? \"success\" : \"\",\n        percent: this.state.baifenbi\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default UploadFile;","map":{"version":3,"names":["React","Upload","message","Button","Progress","UploadOutlined","Link","axios","logoPic","logoStyle","height","defaults","withCredentials","UploadFile","Component","constructor","props","configs","headers","onUploadProgress","progress","console","log","loaded","filseSize","state","baifenbi","toFixed","setState","handleUpload","fileList","formData","FormData","forEach","file","append","uploading","post","then","res","finally","onchange","info","status","size","success","name","error","render","onRemove","index","indexOf","newFileList","slice","splice","beforeUpload","width","margin","padding","e","length","marginTop"],"sources":["/Users/yutao/Desktop/MIT-S3/Django/7381-Project/Frontend/7381-website/src/pages/UploadFile.js"],"sourcesContent":["import React from \"react\";\nimport { Upload, message, Button, Progress } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport logoPic from \"../images/LOGO-H 1.png\";\n\nconst logoStyle = {\n  height: \"65px\",\n};\n\naxios.defaults.withCredentials = true;\n\nclass UploadFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileList: [],\n      uploading: false,\n      filseSize: 0,\n      baifenbi: 0,\n    };\n  }\n\n  configs = {\n    headers: { \"Content-Type\": \"multipart/form-data\" },\n    withCredentials: true,\n    onUploadProgress: (progress) => {\n      console.log(progress);\n      let { loaded } = progress;\n      let { filseSize } = this.state;\n      console.log(loaded, filseSize);\n      let baifenbi = ((loaded / filseSize) * 100).toFixed(2);\n      this.setState({\n        baifenbi,\n      });\n    },\n  };\n\n  handleUpload = () => {\n    const { fileList } = this.state;\n    const formData = new FormData();\n    fileList.forEach((file) => {\n      formData.append(\"files[]\", file);\n    });\n    this.setState({\n      uploading: true,\n    });\n\n    axios\n      .post(\"http://127.0.0.1:8000/upload\", formData, this.configs)\n      .then((res) => {\n        this.setState({\n          baifenbi: 100,\n          uploading: false,\n          fileList: [],\n        });\n      })\n      .finally((log) => {\n        console.log(log);\n      });\n  };\n  onchange = (info) => {\n    if (info.file.status !== \"uploading\") {\n      this.setState({\n        filseSize: info.file.size,\n        baifenbi: 0,\n      });\n    }\n    if (info.file.status === \"done\") {\n      message.success(`${info.file.name} file uploaded successfully`);\n    } else if (info.file.status === \"error\") {\n      message.error(`${info.file.name} file upload failed.`);\n    }\n  };\n\n  render() {\n    const { uploading, fileList } = this.state;\n    const props = {\n      onRemove: (file) => {\n        this.setState((state) => {\n          const index = state.fileList.indexOf(file);\n          const newFileList = state.fileList.slice();\n          newFileList.splice(index, 1);\n          return {\n            fileList: newFileList,\n          };\n        });\n      },\n      beforeUpload: (file) => {\n        this.setState((state) => ({\n          fileList: [...state.fileList, file],\n        }));\n        return false;\n      },\n      fileList,\n    };\n    return (\n      <div style={{ width: \"80%\", margin: \"auto\", padding: 20 }}>\n        <section className=\"postSection\">\n          <Link to=\"/\">\n            <img src={logoPic} alt=\"logo\" id=\"logo-picture\" style={logoStyle} />\n          </Link>\n          <h2 className=\"post_navigation\">Post Your Video Here</h2>\n        </section>\n        <h2>{this.state.baifenbi + \"%\"}</h2>\n        <Upload\n          onChange={(e) => {\n            this.onchange(e);\n          }}\n          {...props}\n        >\n          <Button>\n            <UploadOutlined /> Click to Upload\n          </Button>\n        </Upload>\n        <Button\n          type=\"primary\"\n          onClick={this.handleUpload}\n          disabled={fileList.length === 0}\n          loading={uploading}\n          style={{ marginTop: 16 }}\n        >\n          {uploading ? \"Uploading\" : \"Start Upload\"}\n        </Button>\n        <Progress\n          style={{ marginTop: 20 }}\n          status={this.state.baifenbi !== 0 ? \"success\" : \"\"}\n          percent={this.state.baifenbi}\n        ></Progress>\n      </div>\n    );\n  }\n}\n\nexport default UploadFile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}